syntax = "proto3";

//protoc --go_out=plugins=grpc:. naturaeproto/Naturae.proto

option java_package = "com.examples.naturaeproto";
option go_package = "naturaeproto";

package naturaeproto;

service ServerRequests{
    rpc CreateAccount (CreateAccountRequest) returns(CreateAccountReply){}
    rpc Login (LoginRequest) returns(LoginReply){}
    rpc AccountAuthentication(AccountAuthenRequest) returns(AccountAuthenReply){}
    rpc GetNewAccessToken(GetAccessTokenRequest) returns (GetAccessTokenReply){}
    rpc SayHello (HelloRequest) returns (HelloReply){};
    rpc CreatePost (CreatePostRequest) returns (CreatePostReply){};
    rpc GetPosts (GetPostRequest) returns (GetPostReply){};
    rpc ChangePassword (ChangePasswordRequest) returns (ChangePasswordReply){};
}

message HelloRequest{
    string name =1;
}

message HelloReply{
    string message = 1;
}

message CreateAccountRequest{
    string appKey = 1;
    string email = 2;
    string password = 3;
    string firstName = 4;
    string lastName = 5;
}

message CreateAccountReply {
    string accessToken = 1;
    string refreshToken = 2;
    Status status = 3;
}

message LoginRequest {
    string appKey = 1;
    string email = 2;
    string password = 3;
}

message LoginReply {
    string accessToken = 1;
    string refreshToken = 2;
    Status status = 3;
}

message AccountAuthenRequest {
    string appKey = 1;
    string firstName = 2;
    string email = 3;
    string authenCode = 4;
}

message AccountAuthenReply {
    bool result = 1;
    Status status = 2;
}

message CreatePostRequest {
    string appKey = 1;
    string accessToken = 2;
    string title = 3;
    string species = 4;
    string description = 5;
    float lat = 6;
    float lng = 7;
    string encodedImage = 8;
}

message CreatePostReply {
    Status status = 1;
}

message GetPostRequest {
    string appKey = 1;
    float lat = 2;
    float lng = 3;
    int32 radius = 4;
}

message GetPostReply{
    Status status = 1;
    repeated GetPostReplyStruct reply = 2;

}

message GetPostReplyStruct{
    string title = 3;
    string species = 4;
    string description = 5;
    float lat = 6;
    float lng = 7;
    string encodedImage = 8;
}

message Status {
    int32 Code = 1;
    string Message = 2;
}

message GetAccessTokenRequest{
    string appKey = 1;
    string refreshToken = 2;
}

message GetAccessTokenReply{
    string accessToken = 1;
    Status status = 2;
}

message ChangePasswordRequest{
    string appKey = 1;
    string currentPassword = 2;
    string newPassword = 3;
}

message ChangePasswordReply{
    Status status = 1;
}
